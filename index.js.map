{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport \"../css/styles.css\";\n\nexport default class Render {\n  #selectorGallery;\n  #lightbox;\n  #selectorLoadingMsg;\n  #selectorLoadButton;\n  #HIDDEN_CLASS;\n\n  constructor(\n    selectorGallery = \".gallery\",\n    selectorLoadingMsg = \".loader-section\",\n    selectorLoadButton = \"button[type=\\\"button\\\"]\",\n  ) {\n    this.#selectorLoadingMsg = selectorLoadingMsg;\n    this.#lightbox = new SimpleLightbox(\n      `${(this.#selectorGallery = selectorGallery)} a`,\n    );\n    this.#selectorLoadButton = selectorLoadButton;\n    this.#HIDDEN_CLASS = \"visually-hidden\";\n  }\n\n  showGalery(objData, page, per_page) {\n    const gallery = document.querySelector(this.#selectorGallery);\n    const loadButton = document.querySelector(this.#selectorLoadButton);\n\n    if (page === 1) {\n      gallery.innerHTML = \"\";\n    }\n\n    if (!objData || !objData.total) {\n      this.showErrorMsg();\n      loadButton.classList.add(this.#HIDDEN_CLASS);\n      return;\n    }\n\n    gallery.innerHTML += objData.hits.reduce((accumulator, currentValue) => {\n      return (\n        accumulator +\n        `<li>\n              <a href=\"${currentValue.largeImageURL}\">\n                <img src=\"${currentValue.webformatURL}\" alt=\"${currentValue.tags}\"/>\n                </a>\n              <ul class=\"img-description\">\n              <li>\n                <span data-header>\n                  Likes\n                </span>\n                <span data-count>\n                  ${currentValue.likes}\n                  </span>\n              </li>\n              <li>\n                <span data-header>\n                Views\n                </span>\n                <span data-count>\n                ${currentValue.views}\n                </span>\n                </li>\n                <li>\n                <span data-header>\n                Comments\n                </span>\n                <span data-count>\n                ${currentValue.comments}\n                </span>\n                </li>\n                <li>\n                <span data-header>\n                Downloads\n                </span>\n                <span data-count>\n                  ${currentValue.downloads}\n                </span>\n              </li>\n            </ul>\n          </li>`\n      );\n    }, \"\");\n    loadButton.classList.remove(this.#HIDDEN_CLASS);\n    this.#lightbox.refresh();\n\n    if (objData.total - (page - 1) * per_page <= per_page) {\n      this.showErrorMsg(\n        \"We're sorry, but you've reached the end of search results.\",\n      );\n      loadButton.classList.add(this.#HIDDEN_CLASS);\n    }\n  }\n\n  scrollGallery() {\n    0;\n    const img = document.querySelector(\"li>a>img\");\n    const rect = img.getBoundingClientRect();\n    scrollBy({\n      top: rect.height * 2,\n      behavior: \"smooth\",\n    });\n  }\n\n  toggleLoadingMsg() {\n    document\n      .querySelector(this.#selectorLoadingMsg)\n      .classList.toggle(this.#HIDDEN_CLASS);\n  }\n\n  showErrorMsg(\n    msg = \"Sorry, there are no images matching your search query. Please, try again!\",\n  ) {\n    iziToast.show({\n      class: \"error-msg\",\n      message: msg,\n      messageColor: \"#FAFAFB\",\n      messageSize: \"16\",\n      messageLineHeight: \"24\",\n      theme: \"dark\",\n      color: \"#EF4040\",\n      iconText: \"Close\",\n      iconColor: \"#FAFAFB\",\n      // iconUrl: 'img/button-x.svg',\n      maxWidth: \"432\",\n      zindex: 999,\n      close: true,\n      closeOnEscape: true,\n      displayMode: 2,\n      position: \"topRight\",\n      timeout: 5000,\n      animateInside: false,\n      drag: false,\n      progressBarColor: \"#B51B1B\",\n    });\n  }\n}\n","import axios from \"axios\";\n\nexport default class PixabayAPI {\n  #params;\n\n  constructor() {\n    this.#params = {\n      key: \"51289001-701d2fcdb5357aeffdf8b918c\",\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n      safesearch: \"true\",\n      per_page: 15,\n      page: 0,\n    };\n  }\n\n  get page() {\n    return this.#params.page;\n  }\n\n  get per_page() {\n    return this.#params.per_page;\n  }\n\n  async searchImg(q = \"\") {\n    if (q) {\n      this.#params[\"q\"] = q;\n      this.#params.page = 0;\n    }\n\n    this.#params.page += 1;\n    // console.log(this.#params.page);\n    return await axios.get(\"https://pixabay.com/api/\", {\n      params: this.#params,\n    });\n  }\n}\n","import Render from \"./js/render-functions\";\nimport PixabayAPI from \"./js/pixabay-api\";\n\nconst renderInst = new Render();\nconst pixabayInst = new PixabayAPI();\n\nconst searchImg = document.querySelector(\".form-search\");\n\nsearchImg.addEventListener(\"submit\", event => {\n  event.preventDefault();\n  const searchTerm = searchImg.elements[\"search_string\"].value.trim();\n  if (!searchTerm) {\n    renderInst.showErrorMsg(\"Empty field!\");\n    return;\n  }\n\n  renderInst.toggleLoadingMsg();\n  pixabayInst.searchImg(searchTerm).then(response => {\n    renderInst.toggleLoadingMsg();\n    renderInst.showGalery(response.data, pixabayInst.page, pixabayInst.per_page);\n  });\n});\n\nconst loadButton = document.querySelector(\"button[type=\\\"button\\\"]\");\nloadButton.addEventListener(\"click\", renderNextPage);\n\nfunction renderNextPage() {\n  renderInst.toggleLoadingMsg();\n  pixabayInst.searchImg().then(response => {\n    renderInst.toggleLoadingMsg();\n    renderInst.showGalery(response.data, pixabayInst.page, pixabayInst.per_page);\n    renderInst.scrollGallery();\n  });\n}"],"names":["Render","selectorGallery","selectorLoadingMsg","selectorLoadButton","__privateAdd","_selectorGallery","_lightbox","_selectorLoadingMsg","_selectorLoadButton","_HIDDEN_CLASS","__privateSet","SimpleLightbox","objData","page","per_page","gallery","__privateGet","loadButton","accumulator","currentValue","rect","msg","iziToast","PixabayAPI","_params","q","axios","renderInst","pixabayInst","searchImg","event","searchTerm","response","renderNextPage"],"mappings":"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"}