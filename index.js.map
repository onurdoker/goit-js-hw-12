{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/getImage-api.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = \"51289001-701d2fcdb5357aeffdf8b918c\";\nconst perPage = 15;\n\nexport async function searchImages(query, page) {\n  const url = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n    query,\n  )}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const { hits, totalHits } = response.data;\n    return { hits, total: totalHits };\n  } catch (error) {\n    console.error(\"Error\", error);\n    throw error;\n  }\n}","export function addImage(image) {\n  const galleryElement = document.querySelector(\".gallery\");\n  const html = `\n    <li class=\"gallery-item\">\n      <div class=\"place-for-image\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"picture\"/>\n        </a>\n      </div>\n      <div class=\"info-text\">\n        <div class=\"description\">\n          <span class=\"bold-text\">Likes</span>\n          <span class=\"info-value\">${image.likes}</span>\n        </div>\n        <div class=\"description\">\n          <span class=\"bold-text\">Views</span>\n          <span class=\"info-value\">${image.views}</span>\n        </div>\n        <div class=\"description\">\n          <span class=\"bold-text\">Comments</span>\n          <span class=\"info-value\">${image.comments}</span>\n        </div>\n        <div class=\"description\">\n          <span class=\"bold-text\">Downloads</span>\n          <span class=\"info-value\">${image.downloads}</span>\n        </div>\n      </div>\n    </li>\n  `;\n  galleryElement.insertAdjacentHTML(\"beforeend\", html);\n}\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { searchImages } from \"./js/pixabay-api.js\";\nimport { addImage } from \"./js/getImage-api.js\";\n\nconst loader = document.querySelector(\".loader\");\nconst form = document.getElementById(\"searchForm\");\nconst galleryElement = document.querySelector(\".gallery\");\nconst loadMoreButton = document.querySelector(\".load-more\");\nconst endMessage = \"We're sorry, but you've reached the end of search results\";\n\nlet currentPage = 1;\nlet searchQuery = \"\";\nlet totalHits = 0;\nlet cardHeight = 0;\nlet lightbox;\n\nfunction toggleLoader(display) {\n  loader.style.display = display;\n}\n\nloader.style.display = \"none\";\nform.addEventListener(\"submit\", search);\n\nfunction moreButton(show) {\n  loadMoreButton.style.display = show ? \"block\" : \"none\";\n}\n\nform.addEventListener(\"submit\", async e => {\n  e.preventDefault();\n\n  searchQuery = document.getElementById(\"searchInput\").value.trim();\n\n  if (searchQuery === \"\") {\n    iziToast.warning({\n      title: \"Caution\", message: \"Please enter a search query.\",\n    });\n    return;\n  }\n\n  currentPage = 1;\n  toggleLoader(true);\n  await performSearch();\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n  currentPage++;\n  toggleLoader(true);\n  await performSearch();\n  smoothScroll();\n});\n\nfunction smoothScroll() {\n  if (currentPage > 1) {\n    if (cardHeight === 0) {\n      const firstCard = document.querySelector(\".gallery-item\");\n      const rect = firstCard.getBoundingClientRect();\n      cardHeight = rect.height;\n    }\n    window.scrollBy({\n      top: cardHeight * 4, behavior: \"smooth\",\n    });\n  }\n}\n\nasync function performSearch() {\n  try {\n    const { hits, total } = await searchImages(searchQuery, currentPage);\n    if (hits.length === 0) {\n      iziToast.warning({\n        title: \"Caution\", message: \"Sorry, there are no more images matching your search query.\",\n      });\n\n      galleryElement.innerHTML = \"\";\n\n      moreButton(false);\n    } else {\n      if (currentPage === 1) {\n        galleryElement.innerHTML = \"\";\n        totalHits = total;\n\n        moreButton(false);\n      }\n      hits.forEach(image => {\n        addImage(image);\n      });\n\n      if (galleryElement.querySelectorAll(\".gallery-item\").length < totalHits) {\n\n        moreButton(true);\n      } else {\n\n        moreButton(false);\n        iziToast.info({ message: endMessage });\n      }\n      if (!lightbox) {\n        lightbox = new SimpleLightbox(\".gallery-link\", {\n          captions: true, captionsData: \"alt\", captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh();\n      }\n    }\n  } catch (error) {\n    console.error(\"Error\", error);\n  } finally {\n    toggleLoader(false);\n  }\n}\n"],"names":["apiKey","perPage","searchImages","query","page","url","response","axios","hits","totalHits","error","addImage","image","galleryElement","html","loader","form","loadMoreButton","endMessage","currentPage","searchQuery","cardHeight","lightbox","toggleLoader","display","moreButton","show","iziToast","performSearch","smoothScroll","total","SimpleLightbox"],"mappings":"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"}