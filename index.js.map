{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/getImage-api.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst apiKey = \"51289001-701d2fcdb5357aeffdf8b918c\";\nconst perPage = 15;\n\nexport async function searchImages(query, page) {\n  const url = `\\`https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(\n    query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(url);\n    const { hits, totalHits } = response.data;\n    return { hits, total: totalHits };\n  } catch (error) {\n    console.error(\"Error\", error);\n    throw error;\n  }\n}","export function addImage(image) {\n  const neccesaryArray = image.hits;\n  return neccesaryArray.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) => `\n        <li class=\"card\">\n            <div class=\"place-for-image\">\n                <a href=\"${largeImageURL}\">\n                    <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"picture\"/>\n                </a>\n            </div>\n            <div class=\"info-text\">\n                <div class=\"description\">\n                    <span class=\"bold-text\">Likes</span>\n                    <span class=\"info-value\">${likes}</span>\n                </div>\n                <div class=\"description\">\n                    <span class=\"bold-text\">Views</span>\n                    <span class=\"info-value\">${views}</span>\n                </div>\n                <div class=\"description\">\n                    <span class=\"bold-text\">Comments</span>\n                    <span class=\"info-value\">${comments}</span>\n                </div>\n                <div class=\"description\">\n                    <span class=\"bold-text\">Downloads</span>\n                    <span class=\"info-value\">${downloads}</span>\n                </div>\n            </div>\n        </li>`,\n  ).join(\"\");\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { searchImages } from \"./js/pixabay-api.js\";\nimport { addImage } from \"./js/getImage-api.js\";\n\nconst loader = document.querySelector(\".loader\");\nconst form = document.getElementById(\"searchForm\");\nconst galleryElement = document.querySelector(\".gallery\");\nconst loadMoreButton = document.querySelector(\".load-more\");\nconst endMessage = \"We're sorry, but you've reached the end of search results\";\n\nlet currentPage = 1;\nlet searchQuery = \"\";\nlet totalHits = 0;\nlet cardHeight = 0;\nlet lightbox;\n\nfunction toggleLoader(display) {\n  loader.style.display = display;\n}\n\nloader.style.display = \"none\";\nform.addEventListener(\"submit\", search);\n\nfunction moreButton(show) {\n  loadMoreButton.style.display = show ? \"block\" : \"none\";\n}\n\nform.addEventListener(\"submit\", async e => {\n  e.preventDefault();\n\n  searchQuery = document.getElementById(\"searchInput\").value.trim();\n\n  if (searchQuery === \"\") {\n    iziToast.warning({\n      title: \"Caution\", message: \"Please enter a search query.\",\n    });\n    return;\n  }\n\n  currentPage = 1;\n  toggleLoader(true);\n  await performSearch();\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n  currentPage++;\n  toggleLoader(true);\n  await performSearch();\n  smoothScroll();\n});\n\nfunction smoothScroll() {\n  if (currentPage > 1) {\n    if (cardHeight === 0) {\n      const firstCard = document.querySelector(\".gallery-item\");\n      const rect = firstCard.getBoundingClientRect();\n      cardHeight = rect.height;\n    }\n    window.scrollBy({\n      top: cardHeight * 4, behavior: \"smooth\",\n    });\n  }\n}\n\nasync function performSearch() {\n  try {\n    const { hits, total } = await searchImages(searchQuery, currentPage);\n    if (hits.length === 0) {\n      iziToast.warning({\n        title: \"Caution\", message: \"Sorry, there are no more images matching your search query.\",\n      });\n\n      galleryElement.innerHTML = \"\";\n\n      moreButton(false);\n    } else {\n      if (currentPage === 1) {\n        galleryElement.innerHTML = \"\";\n        totalHits = total;\n\n        moreButton(false);\n      }\n      hits.forEach(image => {\n        addImage(image);\n      });\n\n      if (galleryElement.querySelectorAll(\".gallery-item\").length < totalHits) {\n\n        moreButton(true);\n      } else {\n\n        moreButton(false);\n        iziToast.info({ message: endMessage });\n      }\n      if (!lightbox) {\n        lightbox = new SimpleLightbox(\".gallery-link\", {\n          captions: true, captionsData: \"alt\", captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh();\n      }\n    }\n  } catch (error) {\n    console.error(\"Error\", error);\n  } finally {\n    toggleLoader(false);\n  }\n}\n"],"names":["apiKey","perPage","searchImages","query","page","url","response","axios","hits","totalHits","error","addImage","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loader","form","galleryElement","loadMoreButton","endMessage","currentPage","searchQuery","cardHeight","lightbox","toggleLoader","display","moreButton","show","e","iziToast","performSearch","smoothScroll","total","SimpleLightbox"],"mappings":"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"}